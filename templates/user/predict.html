{% extends "layout.html" %}
{% block content %}

<div class="max-w-6xl mx-auto">
    <h2 class="text-3xl font-bold text-gray-800 mb-8">Diagnostic Dashboard</h2>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        
        <div class="lg:col-span-1">
            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 h-full">
                <div class="flex items-center mb-4">
                    <div class="bg-blue-100 p-2 rounded-lg text-blue-600 mr-3">
                        <i class="fa-solid fa-file-medical-alt text-xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-700">Lab Report OCR</h3>
                </div>
                <p class="text-sm text-gray-500 mb-6">Upload a lab report image or PDF to auto-extract vitals.</p>
                
                <form action="{{ url_for('predict') }}" method="POST" enctype="multipart/form-data" class="space-y-4">
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50 transition relative">
                        <input type="file" name="file" accept=".png,.jpg,.jpeg,.pdf" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" onchange="document.getElementById('file-label').innerText = this.files[0].name">
                        <i class="fa-solid fa-cloud-arrow-up text-3xl text-gray-400 mb-2"></i>
                        <p id="file-label" class="text-sm text-gray-500">Choose File</p>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition font-bold shadow-md">
                        Upload & Predict
                    </button>
                </form>
                <p class="text-xs text-green-600 mt-4 text-center"><i class="fa-solid fa-check-circle"></i> OCR Engine Ready</p>
            </div>
        </div>

        <div class="lg:col-span-2">
            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <div class="flex items-center mb-6">
                    <div class="bg-purple-100 p-2 rounded-lg text-purple-600 mr-3">
                        <i class="fa-solid fa-user-doctor text-xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-700">Clinical Parameters</h3>
                </div>

                <form action="{{ url_for('predict') }}" method="POST">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                        
                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Age</label>
                            <input type="number" name="age" placeholder="e.g. 55" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none transition" required>
                        </div>

                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Sex</label>
                            <select name="sex" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white">
                                <option value="M">Male</option>
                                <option value="F">Female</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Resting BP (mm Hg)</label>
                            <input type="number" name="resting_bp" placeholder="e.g. 120" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none transition" required>
                        </div>

                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Cholesterol (mm/dl)</label>
                            <input type="number" name="cholesterol" placeholder="e.g. 180" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none transition" required>
                        </div>

                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Max Heart Rate</label>
                            <input type="number" name="max_hr" placeholder="e.g. 140" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none transition" required>
                        </div>

                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Exercise Angina</label>
                            <select name="exercise_angina" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white">
                                <option value="N">No</option>
                                <option value="Y">Yes</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Chest Pain Type</label>
                            <select name="chest_pain_type" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white">
                                <option value="ASY">Asymptomatic (ASY)</option>
                                <option value="NAP">Non-Anginal (NAP)</option>
                                <option value="ATA">Atypical Angina (ATA)</option>
                                <option value="TA">Typical Angina (TA)</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Fasting BS > 120?</label>
                            <select name="fasting_bs" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white">
                                <option value="0">No (< 120 mg/dl)</option>
                                <option value="1">Yes (> 120 mg/dl)</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Resting ECG</label>
                            <select name="resting_ecg" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white">
                                <option value="Normal">Normal</option>
                                <option value="ST">ST-T Wave Abnormality</option>
                                <option value="LVH">Left Ventricular Hypertrophy</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Oldpeak (ST Depression)</label>
                            <input type="number" step="0.1" name="oldpeak" placeholder="e.g. 1.5" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none transition" required>
                        </div>

                        <div>
                            <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">ST Slope</label>
                            <select name="st_slope" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white">
                                <option value="Flat">Flat</option>
                                <option value="Up">Up</option>
                                <option value="Down">Down</option>
                            </select>
                        </div>
                    </div>

                    <div class="mt-8 flex justify-end">
                        <button type="submit" class="bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 transition font-bold shadow-md flex items-center">
                            Run AI Diagnosis <i class="fa-solid fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}