<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Medical Report - {{ r.id }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* CSS to hide buttons when printing */
        @media print {
            .no-print { display: none !important; }
            body { background-color: white; }
            .shadow-lg { box-shadow: none !important; }
        }
    </style>
</head>
<body class="bg-gray-100 p-10 font-sans">

    <div class="max-w-3xl mx-auto mb-6 flex justify-between no-print">
        <a href="{{ url_for('dashboard') }}" class="text-blue-600 hover:underline">‚Üê Back to Dashboard</a>
        <button onclick="window.print()" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold shadow hover:bg-blue-700 transition">
            Save as PDF / Print
        </button>
    </div>

    <div class="max-w-3xl mx-auto bg-white p-12 shadow-lg border border-gray-200">
        
        <div class="flex justify-between items-end border-b-2 border-blue-600 pb-6 mb-8">
            <div>
                <h1 class="text-4xl font-bold text-gray-800 tracking-tight">HeartLine AI</h1>
                <p class="text-gray-500 mt-1">Advanced Cardiac Risk Assessment</p>
            </div>
            <div class="text-right">
                <p class="text-sm text-gray-500">Report ID: #{{ r.id }}</p>
                <p class="text-sm text-gray-500">Date: {{ r.date.strftime('%Y-%m-%d') }}</p>
            </div>
        </div>

        <div class="mb-10 bg-gray-50 p-6 rounded-lg border border-gray-100">
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <span class="text-gray-500 text-sm uppercase tracking-wider">Patient Name</span>
                    <p class="font-bold text-lg">{{ user.name }}</p>
                </div>
                <div>
                    <span class="text-gray-500 text-sm uppercase tracking-wider">Patient ID</span>
                    <p class="font-bold text-lg">HL-{{ user.id }}</p>
                </div>
            </div>
        </div>

        <div class="text-center mb-12 py-8 border-y border-gray-200">
            <h2 class="text-gray-500 uppercase tracking-widest text-sm mb-2">Prediction Result</h2>
            
            {% if r.prediction == 'High Risk' %}
                <h1 class="text-5xl font-extrabold text-red-600 mb-2">HIGH RISK</h1>
                <p class="text-red-600 font-medium">Immediate Consultation Recommended</p>
            {% else %}
                <h1 class="text-5xl font-extrabold text-green-600 mb-2">LOW RISK</h1>
                <p class="text-green-600 font-medium">Maintain Healthy Lifestyle</p>
            {% endif %}
            
            <div class="mt-6 inline-block bg-gray-100 px-4 py-2 rounded-full text-sm font-semibold text-gray-600">
                AI Confidence Score: {{ "%.1f"|format(r.probability * 100) }}%
            </div>
        </div>

        <h3 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">Clinical Parameters</h3>
        <div class="grid grid-cols-2 gap-y-4 gap-x-8 text-sm">
            <div class="flex justify-between"><span class="text-gray-500">Age</span> <span class="font-medium">{{ r.age }}</span></div>
            <div class="flex justify-between"><span class="text-gray-500">Sex</span> <span class="font-medium">{{ r.sex }}</span></div>
            <div class="flex justify-between"><span class="text-gray-500">Blood Pressure</span> <span class="font-medium">{{ r.resting_bp }} mmHg</span></div>
            <div class="flex justify-between"><span class="text-gray-500">Cholesterol</span> <span class="font-medium">{{ r.cholesterol }} mg/dl</span></div>
            <div class="flex justify-between"><span class="text-gray-500">Max Heart Rate</span> <span class="font-medium">{{ r.max_hr }} bpm</span></div>
            <div class="flex justify-between"><span class="text-gray-500">Chest Pain Type</span> <span class="font-medium">{{ r.chest_pain_type }}</span></div>
            <div class="flex justify-between"><span class="text-gray-500">Fasting BS</span> <span class="font-medium">{{ r.fasting_bs }}</span></div>
            <div class="flex justify-between"><span class="text-gray-500">Resting ECG</span> <span class="font-medium">{{ r.resting_ecg }}</span></div>
        </div>

        <div class="mt-20 pt-6 border-t border-gray-200 text-center">
            <p class="text-xs text-gray-400 italic">
                Disclaimer: This report is generated by an Artificial Intelligence system (HeartLine v1.0). 
                It is a screening tool and does not constitute a formal medical diagnosis. 
                Please verify all results with a certified medical professional.
            </p>
        </div>
    </div>

</body>
</html>