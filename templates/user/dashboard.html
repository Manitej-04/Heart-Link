{% extends "layout.html" %}
{% block content %}
<div class="flex justify-between items-center mb-8">
    <h2 class="text-3xl font-bold text-gray-800">My Health Dashboard</h2>
    <a href="{{ url_for('predict') }}"
        class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition shadow-md">
        <i class="fa-solid fa-plus mr-2"></i> New Checkup
    </a>
</div>

{% if reports %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for report in reports %}
    <div
        class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition border-t-4 {{ 'border-red-500' if report.prediction == 'High Risk' else 'border-green-500' }}">
        <div class="flex justify-between items-start mb-4">
            <div>
                <p class="text-gray-400 text-sm">{{ report.date.strftime('%B %d, %Y') }}</p>
                <h3
                    class="text-xl font-bold {{ 'text-red-600' if report.prediction == 'High Risk' else 'text-green-600' }}">
                    {{ report.prediction }}
                </h3>
            </div>
            <div class="text-right">
                <span class="text-2xl font-bold text-gray-800">{{ "%.0f"|format(report.probability * 100) }}%</span>
                <p class="text-xs text-gray-500">Probability</p>
            </div>
        </div>

        <div class="space-y-2 text-sm text-gray-600 mb-6">
            <div class="flex justify-between border-b pb-1"><span>Cholesterol:</span> <span>{{ report.cholesterol
                    }}</span></div>
            <div class="flex justify-between border-b pb-1"><span>BP:</span> <span>{{ report.resting_bp }}</span></div>
            <div class="flex justify-between border-b pb-1"><span>Max HR:</span> <span>{{ report.max_hr }}</span></div>
        </div>

        <a href="{{ url_for('print_report', report_id=report.id) }}" target="_blank"
            class="block w-full text-center border border-gray-300 py-2 rounded text-gray-600 hover:bg-gray-50 transition">
            <i class="fa-solid fa-print mr-2"></i> Print / Save PDF
        </a>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-20 bg-white rounded-xl shadow">
    <div class="text-gray-300 text-6xl mb-4"><i class="fa-solid fa-clipboard-list"></i></div>
    <h3 class="text-xl font-bold text-gray-600 mb-2">No Reports Yet</h3>
    <p class="text-gray-500 mb-6">Start your first health assessment today.</p>
    <a href="{{ url_for('predict') }}" class="text-blue-600 font-bold hover:underline">Start Assessment</a>
</div>
{% endif %}
{% endblock %}